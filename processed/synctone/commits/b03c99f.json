{
  "sha": "b03c99f",
  "fullSha": "b03c99ff64cdbb61477d8cd5d5f8328de33ec0e2",
  "author_id": "noreply@anthropic.com",
  "author": {
    "name": "Claude",
    "email": "noreply@anthropic.com"
  },
  "committer": {
    "name": "Claude",
    "email": "noreply@anthropic.com"
  },
  "timestamp": "2025-12-29T07:11:16Z",
  "commitDate": "2025-12-29T07:11:16Z",
  "subject": "fix: use native browser permission as single source of truth for notification icon",
  "body": "The previous approach of checking OneSignal permission status had reliability issues:\n- Icon would flash between states as OneSignal loaded\n- State could be inconsistent between native browser and OneSignal APIs\n- Loading state (‚è≥) was confusing with undetermined state\n\nChanges:\n- Use window.Notification.permission directly for all UI state updates\n- Simplify icon logic: üîî (enabled/ready), üîï (denied) - no more hourglass\n- OneSignal still used for player ID and push notification delivery\n- But UI state is always driven by native browser permission API\n\nBenefits:\n- Instant, accurate icon state on page load (no waiting for SDK)\n- No more flashing between states\n- Clearer UX: bell = available, bell-slash = blocked\n- Native browser permission is ground truth (more reliable)",
  "tags": [
    "bugfix",
    "refactor",
    "ux"
  ],
  "complexity": 3,
  "scope": null,
  "title": "use native browser permission as single source of truth for notification icon",
  "is_conventional": true,
  "has_breaking_change": false,
  "references": [],
  "stats": {
    "filesChanged": 2,
    "additions": 78,
    "deletions": 62
  },
  "files": [
    "app/(app)/home.tsx",
    "hooks/useNotifications.ts"
  ],
  "repo_id": "synctone",
  "urgency": 2,
  "impact": "user-facing"
}